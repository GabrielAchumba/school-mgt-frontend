(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{c0dc:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-sm"},[a("div",{staticClass:"row"},[a("q-toolbar",{staticClass:"col-12 bg-accent"},[a("q-btn",{staticClass:"text-capitalize",attrs:{icon:"edit",flat:""}},[a("q-menu",{attrs:{fit:""}},[a("Form",{staticStyle:{width:"400px"},attrs:{formData:e.form},on:{Compute:function(t){return e.Compute(t)},typeOfInstructor:function(t){return e.typeOfInstructor(t)}}})],1)],1),a("q-space"),e.isExpanded?a("q-btn",{staticClass:"text-capitalize",attrs:{flat:"",icon:"bar_chart"}},[a("q-menu",{attrs:{fit:""}},[a("Form",{attrs:{formData:e.chartForm},on:{Plot:function(t){return e.Plot(t)}}})],1)],1):e._e()],1)],1),a("div",{staticClass:"row q-pa-sm"},[e.isTable?a("div",{staticClass:"col-12"},[a("Table",{attrs:{table_VM:e.tableVM,isResponsive:e.isResponsive,isHeader:e.isHeader}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTable,expression:"!isTable"}],staticClass:"col-12 q-pa-sm",attrs:{id:"myDiv"}})])])},s=[],o=(a("456d"),a("8a81"),a("d25f"),a("9986"),a("8e6e"),a("c47a")),n=a.n(o),l=a("fa84"),c=a.n(l),i=a("967e"),u=a.n(i),m=(a("7f7f"),a("6d67"),a("7514"),a("9bff")),p=a("9437"),f=a("39b2"),d=a("6132"),b=a("72da"),h=a("3a3c"),v=a("0f57"),x=a("61cc"),q=a.n(x),w={title:"Configure Result Report",qSelects:[{label:"Type of Instructor",value:"",type:"text",list:[],actionName:"typeOfInstructor",visible:!0},{label:"Class Room",value:"",type:"text",list:[],actionName:"classRoom",visible:!0}],qInputs:[],qBtns:[{label:"Compute",name:"Compute"}],qDates:[{label:"Start Date",name:"2019/02/01"},{label:"End Date",name:"2019/02/01"}],GroupedCheckBoxes:[{isGroupedCheckBox:!0,isExpanded:!1,list:[],group:[],label:"Subjects"},{isGroupedCheckBox:!0,isExpanded:!1,list:[],group:[],label:"Students"},{isGroupedCheckBox:!0,isExpanded:!1,list:[],group:[],label:"Teachers"}]},y={title:"Configure Chart",qSelects:[{label:"Horizontal Parameter",value:"",type:"text",list:[],actionName:"",visible:!0},{label:"Vertical Parameter",value:"",type:"text",list:[],actionName:"",visible:!0}],qInputs:[],qBtns:[{label:"Plot",name:"Plot"}],qDates:[],GroupedCheckBox:[]},S={selectedResult:{},title:"Students' Results Position",columns:[],rows:[],separator:"cell"};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={components:{MessageBox:m["a"],Form:p["a"],Table:h["a"],Chart:v["a"]},data:function(){return{isHeader:!1,isResponsive:!1,isExpanded:!0,isTable:!0,form:w,chartForm:y,tableVM:S,layout:{},seriesCollection:[]}},methods:{Compute:function(){var e=this;return c()(u.a.mark((function t(){var a,r,s,o,n,l,c,i,m,p,d;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=e.$store.getters["authenticationStore/IdentityModel"],s="result/summarizedstudentspositions",o={url:s,req:{startDate:a.form.qDates[0].name,endDate:a.form.qDates[1].name,subjectIds:a.form.GroupedCheckBoxes[0].group,teacherIds:a.form.GroupedCheckBoxes[2].group,studentIds:a.form.GroupedCheckBoxes[1].group,classroomId:a.form.qSelects[1].value,schoolId:r.schoolId}},t.next=6,Object(f["b"])(o);case 6:n=t.sent,l=n.data,c=l.data,l.message,i=l.success,i&&(console.log("result: ",c),m=Object(b["c"])(c),p=m.columns,d=m.rows,a.isExpanded=!0,a.tableVM.columns=p,a.tableVM.rows=d,a.isTable=!0,a.configurePlotData());case 9:case"end":return t.stop()}}),t)})))()},configurePlotData:function(){var e=this;e.chartForm.qSelects[0].list=e.tableVM.columns.map((function(e,t){return{id:t+1,value:t+1,type:e.label,name:e.name}})),e.chartForm.qSelects[0].value=e.chartForm.qSelects[0].list[0].id,e.chartForm.qSelects[1].list=e.tableVM.columns.map((function(e,t){return console.log("column.scoreMax: ",e.scoreMax),{id:t+1,value:t+1,type:e.label,name:e.name,scoreMax:e.scoreMax}})),e.chartForm.qSelects[1].value=e.chartForm.qSelects[1].list[1].id},typeOfInstructor:function(e){var t=this;return c()(u.a.mark((function a(){var r,s,o;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,s=t.$store.getters["authenticationStore/IdentityModel"],a.next=4,Object(d["c"])(e.value,s.schoolId);case 4:o=a.sent,t.$store.commit("userStore/SetTeachers",o.result),r.form.GroupedCheckBoxes[2].list=o.result.map((function(e){return C(C({},e),{},{label:"".concat(e.firstName," ").concat(e.lastName),value:e.id})}));case 7:case"end":return a.stop()}}),a)})))()},loadConfigData:function(){var e=this;return c()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.form.qSelects[0].list=e.$store.getters["staffStore/staffs"],!(a.form.qSelects[0].list.length>0)){t.next=5;break}return t.next=5,a.typeOfInstructor({value:a.form.qSelects[0].list[0].id});case 5:a.form.qSelects[1].list=e.$store.getters["classRoomStore/classRooms"],a.form.qSelects[1].list.length>0&&(a.form.qSelects[1].value=a.form.qSelects[1].list[0].id),a.form.GroupedCheckBoxes[0].list=e.$store.getters["subjectStore/subjects"].map((function(e){return C(C({},e),{},{label:e.type,value:e.id})})),a.form.GroupedCheckBoxes[1].list=e.$store.getters["studentStore/students"].map((function(e){return C(C({},e),{},{label:"".concat(e.firstName," ").concat(e.lastName),value:e.id})}));case 9:case"end":return t.stop()}}),t)})))()},Plot:function(){var e=this;e.isTable=!1,!1===e.isTable&&e.RefreshPlot()},RefreshPlot:function(){var e=this,t=e.chartForm.qSelects[0].value,a=e.chartForm.qSelects[0].list.find((function(e){return e.value===t})),r=e.tableVM.rows.map((function(e){return e[a.name]})),s=e.chartForm.qSelects[1].value,o=e.chartForm.qSelects[1].list.find((function(e){return e.value===s})),n=e.tableVM.rows.map((function(e){return e[o.name]}));e.layout={title:"".concat(a.type," vs ").concat(o.type),font:{},showlegend:!0,yaxis:{title:"".concat(o.type),zeroline:!1},bargap:.05},e.seriesCollection=[],e.seriesCollection.push({x:r,y:n,name:"Scores",type:"bar",marker:{color:"green",line:{width:2.5}}}),q.a.newPlot("myDiv",e.seriesCollection,e.layout),e.isTable=!1}},mounted:function(){var e=this;!1===e.isTable&&(console.log("seen"),e.RefreshPlot())},created:function(){var e=this;return c()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.loadConfigData();case 3:case"end":return t.stop()}}),t)})))()}},P=O,k=a("2877"),D=a("65c6"),j=a("9c40"),I=a("4e73"),M=a("2c91"),B=a("eebe"),F=a.n(B),T=Object(k["a"])(P,r,s,!1,null,null,null);t["default"]=T.exports;F()(T,"components",{QToolbar:D["a"],QBtn:j["a"],QMenu:I["a"],QSpace:M["a"]})}}]);