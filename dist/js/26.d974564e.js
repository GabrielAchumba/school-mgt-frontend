(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{c4f4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-sm"},[a("div",{staticClass:"row"},[a("q-toolbar",{staticClass:"col-12 bg-accent"},[a("q-btn",{staticClass:"text-capitalize",attrs:{icon:"edit",flat:""},on:{click:e.ShowResultConfiDialog}}),a("q-space"),a("p",{staticClass:"q-pa-sm text-primary"},[e._v(e._s(e.studentFullName))]),a("q-space"),e.isExpanded?a("q-btn",{staticClass:"text-capitalize",attrs:{flat:"",icon:"bar_chart"},on:{click:e.showChartConfigDialog}}):e._e()],1)],1),a("div",{staticClass:"row q-pa-sm"},[e.isTable?a("div",{staticClass:"col-12"},[a("Table",{attrs:{table_VM:e.tableVM,isResponsive:e.isResponsive,isHeader:e.isHeader}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTable,expression:"!isTable"}],staticClass:"col-12 q-pa-sm",attrs:{id:"myDiv"}})]),e._l(e.dialogs,(function(t){return a("q-dialog",{key:t.title,model:{value:t.isVisible,callback:function(a){e.$set(t,"isVisible",a)},expression:"dialog.isVisible"}},[e.isForm?a("Form",{staticStyle:{width:"400px"},attrs:{formData:e.form},on:{Compute:function(t){return e.Compute(t)},typeOfInstructor:function(t){return e.typeOfInstructor(t)},onStudentSelected:function(t){return e.onStudentSelected(t)},showStudentsDialog:function(t){return e.showStudentsDialog(t)}}}):e._e(),e.isSubjectsForm?a("Form",{staticStyle:{width:"400px"},attrs:{formData:e.subjectsForm},on:{closeStudentsDialog:function(t){return e.closeStudentsDialog(t)}}}):e._e(),e.isChartForm?a("Form",{attrs:{formData:e.chartForm},on:{Plot:function(t){return e.Plot(t)}}}):e._e()],1)}))],2)},s=[],o=(a("23bf"),a("06db"),a("8a81"),a("1c4c"),a("5df3"),a("cadf"),a("ac6a"),a("456d"),a("d25f"),a("9986"),a("8e6e"),a("c47a")),n=a.n(o),l=a("fa84"),i=a.n(l),c=a("967e"),u=a.n(c),m=(a("7f7f"),a("6d67"),a("7514"),a("9bff")),f=a("9437"),d=a("39b2"),p=a("6132"),b=a("72da"),h=a("3a3c"),v=a("0f57"),S=a("61cc"),g=a.n(S),y={title:"Configure Result Analysis",qSelects:[{label:"Class Room",value:"",type:"text",list:[],actionName:"classRoom",visible:!0},{label:"Student",value:"",type:"text",list:[],actionName:"onStudentSelected",visible:!0},{label:"Type of Instructor",value:"",type:"text",list:[],actionName:"typeOfInstructor",visible:!0},{label:"Instructor Full Name",value:"",type:"text",list:[],actionName:"instructor",visible:!0}],qInputs:[],qBtns:[{label:"Students",name:"showStudentsDialog",icon:"groups"},{label:"Compute",name:"Compute",icon:"calculate"}],qDates:[{label:"Start Date",name:"2019/02/01"},{label:"End Date",name:"2019/02/01"}],GroupedCheckBoxes:[]},C={title:"Subjects",qInputs:[],qBtns:[{label:"Done",name:"closeStudentsDialog",icon:"done"}],GroupedCheckBoxes:[{isGroupedCheckBox:!0,isExpanded:!0,list:[],group:[],label:"Subjects"}]},w={title:"Configure Chart",qSelects:[{label:"Horizontal Parameter",value:"",type:"text",list:[],actionName:"",visible:!0},{label:"Vertical Parameter",value:"",type:"text",list:[],actionName:"",visible:!0}],qInputs:[],qBtns:[{label:"Plot",name:"Plot",icon:"done"}],qDates:[],GroupedCheckBoxes:[]},q={selectedResult:{},title:"Summary Report",columns:[],rows:[],separator:"cell"},F=[{title:"Configure Result Analysis",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Subjects",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Configure Chart",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"}];function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=j(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,s=function(){};return{s:s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){l=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw o}}}}function j(e,t){if(e){if("string"===typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var I={components:{MessageBox:m["a"],Form:f["a"],Table:h["a"],Chart:v["a"]},data:function(){return{isForm:!0,isSubjectsForm:!1,isHeader:!1,isResponsive:!1,isExpanded:!0,isTable:!0,form:y,chartForm:w,tableVM:q,layout:{},seriesCollection:[],dialogs:F,studentFullName:"",subjectsForm:C,isChartForm:!1}},methods:{showStudentsDialog:function(){var e=this;e.isForm=!1,e.isSubjectsForm=!0,e.dialogFailureOrScuess("Subjects",!0),e.dialogFailureOrScuess("Configure Result Analysis",!1)},showChartConfigDialog:function(){var e=this;e.isChartForm=!0,e.dialogFailureOrScuess("Configure Chart",!0)},dialogFailureOrScuess:function(e,t){var a,r=this,s=-1,o=O(r.dialogs);try{for(o.s();!(a=o.n()).done;){var n=a.value;if(s++,n.title==e){r.dialogs[s].isVisible=t;break}}}catch(l){o.e(l)}finally{o.f()}},closeStudentsDialog:function(){var e=this;e.isForm=!0,e.isSubjectsForm=!1,e.dialogFailureOrScuess("Subjects",!1),e.dialogFailureOrScuess("Configure Result Analysis",!0)},ShowResultConfiDialog:function(){var e=this;e.isForm=!0,e.dialogFailureOrScuess("Configure Result Analysis",!0)},Compute:function(){var e=this;return i()(u.a.mark((function t(){var a,r,s,o,n,l,i,c,m,f,p;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=e.$store.getters["authenticationStore/IdentityModel"],s="result/summarizedresult",o={url:s,req:{startDate:a.form.qDates[0].name,endDate:a.form.qDates[1].name,subjectIds:a.subjectsForm.GroupedCheckBoxes[0].group,teacherId:a.form.qSelects[3].value,studentId:a.form.qSelects[1].value,classroomId:a.form.qSelects[0].value,schoolId:r.schoolId}},t.next=6,Object(d["b"])(o);case 6:n=t.sent,l=n.data,i=l.data,l.message,c=l.success,c&&(m=Object(b["b"])(i),f=m.columns,p=m.rows,a.isExpanded=!0,a.tableVM.columns=f,a.tableVM.rows=p,a.isTable=!0,a.configurePlotData()),a.isForm=!1,a.dialogFailureOrScuess("Configure Result Analysis",!1);case 11:case"end":return t.stop()}}),t)})))()},configurePlotData:function(){var e=this;e.chartForm.qSelects[0].list=e.tableVM.columns.map((function(e,t){return{id:t+1,value:t+1,type:e.label,name:e.name}})),e.chartForm.qSelects[0].value=e.chartForm.qSelects[0].list[0].id,e.chartForm.qSelects[1].list=e.tableVM.columns.map((function(e,t){return console.log("column.scoreMax: ",e.scoreMax),{id:t+1,value:t+1,type:e.label,name:e.name,scoreMax:e.scoreMax}})),e.chartForm.qSelects[1].value=e.chartForm.qSelects[1].list[1].id},onStudentSelected:function(e){console.log("payload: ",e);var t,a=this,r=O(e.list);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(e.value===s.id){a.studentFullName=s.type.toUpperCase();break}}}catch(o){r.e(o)}finally{r.f()}},typeOfInstructor:function(e){var t=this;return i()(u.a.mark((function a(){var r,s,o;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,s=t.$store.getters["authenticationStore/IdentityModel"],a.next=4,Object(p["c"])(e.value,s.schoolId);case 4:o=a.sent,t.$store.commit("userStore/SetTeachers",o.result),r.form.qSelects[3].list=o.result.map((function(e){return D(D({},e),{},{type:"".concat(e.firstName," ").concat(e.lastName)})})),r.form.qSelects[3].list.length>0&&(r.form.qSelects[3].value=r.form.qSelects[3].list[0].id);case 8:case"end":return a.stop()}}),a)})))()},loadConfigData:function(){var e=this;return i()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.form.qSelects[0].list=e.$store.getters["classRoomStore/classRooms"],a.form.qSelects[0].list.length>0&&(a.form.qSelects[0].value=a.form.qSelects[0].list[0].id),a.form.qSelects[1].list=e.$store.getters["studentStore/students"].map((function(e){return D(D({},e),{},{type:"".concat(e.firstName," ").concat(e.lastName)})})),a.form.qSelects[1].list.length>0&&(a.form.qSelects[1].value=a.form.qSelects[1].list[0].id,a.studentFullName=a.form.qSelects[1].list[0].type.toUpperCase(),console.log("context.studentFullName: ",a.studentFullName)),a.form.qSelects[2].list=e.$store.getters["staffStore/staffs"],!(a.form.qSelects[2].list.length>0)){t.next=9;break}return t.next=9,a.typeOfInstructor({value:a.form.qSelects[2].list[0].id});case 9:a.subjectsForm.GroupedCheckBoxes[0].list=e.$store.getters["subjectStore/subjects"].map((function(e){return D(D({},e),{},{label:e.type,value:e.id})}));case 10:case"end":return t.stop()}}),t)})))()},Plot:function(){var e=this;e.isTable=!1,!1===e.isTable&&(e.RefreshPlot(),e.isChartForm=!1,e.dialogFailureOrScuess("Configure Chart",!1))},RefreshPlot:function(){var e=this,t=e.chartForm.qSelects[0].value,a=e.chartForm.qSelects[0].list.find((function(e){return e.value===t})),r=e.tableVM.rows.map((function(e){return e[a.name]})),s=e.chartForm.qSelects[1].value,o=e.chartForm.qSelects[1].list.find((function(e){return e.value===s})),n=e.tableVM.rows.map((function(e){return e[o.name]})),l=n.map((function(e){return o.scoreMax-e}));e.layout={title:"".concat(a.type," vs ").concat(o.type),barmode:"stack",font:{},showlegend:!0,yaxis:{title:"".concat(o.type),zeroline:!1},bargap:.05},e.seriesCollection=[],e.seriesCollection.push({x:r,y:n,name:"Scores",type:"bar",marker:{color:"green",line:{width:2.5}}}),e.seriesCollection.push({x:r,y:l,name:"Maximum Score",type:"bar",marker:{color:"orange",line:{width:2.5}}}),g.a.newPlot("myDiv",e.seriesCollection,e.layout),e.isTable=!1}},mounted:function(){var e=this;!1===e.isTable&&e.RefreshPlot()},created:function(){var e=this;return i()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.loadConfigData();case 3:return t.next=5,a.ShowResultConfiDialog();case 5:case"end":return t.stop()}}),t)})))()}},P=I,R=a("2877"),M=a("65c6"),N=a("9c40"),V=a("2c91"),E=a("24e8"),T=a("eebe"),A=a.n(T),_=Object(R["a"])(P,r,s,!1,null,null,null);t["default"]=_.exports;A()(_,"components",{QToolbar:M["a"],QBtn:N["a"],QSpace:V["a"],QDialog:E["a"]})}}]);