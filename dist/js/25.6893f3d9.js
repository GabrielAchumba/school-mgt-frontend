(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{c0dc:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-sm"},[s("div",{staticClass:"row"},[s("q-toolbar",{staticClass:"col-12 bg-accent"},[s("q-btn",{staticClass:"text-capitalize",attrs:{icon:"edit",flat:""},on:{click:e.ShowResultConfiDialog}}),s("q-space"),s("p",{staticClass:"q-pa-sm text-primary"},[e._v(e._s(e.studentFullName))]),s("q-space"),e.isExpanded?s("q-btn",{staticClass:"text-capitalize",attrs:{flat:"",icon:"bar_chart"},on:{click:e.showChartConfigDialog}}):e._e()],1)],1),s("div",{staticClass:"row q-pa-sm"},[e.isTable?s("div",{staticClass:"col-12"},[s("Table",{attrs:{table_VM:e.tableVM,isResponsive:e.isResponsive,isHeader:e.isHeader}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTable,expression:"!isTable"}],staticClass:"col-12 q-pa-sm",attrs:{id:"myDiv"}})]),e._l(e.dialogs,(function(t){return s("q-dialog",{key:t.title,model:{value:t.isVisible,callback:function(s){e.$set(t,"isVisible",s)},expression:"dialog.isVisible"}},[e.isForm?s("Form",{staticStyle:{width:"400px"},attrs:{formData:e.form},on:{Compute:function(t){return e.Compute(t)},typeOfInstructor:function(t){return e.typeOfInstructor(t)},onStudentSelected:function(t){return e.onStudentSelected(t)},showTeachersDialog:function(t){return e.showTeachersDialog(t)},showStudentsDialog:function(t){return e.showStudentsDialog(t)},showSubjectsDialog:function(t){return e.showSubjectsDialog(t)}}}):e._e(),e.isTeachersForm?s("Form",{staticStyle:{width:"400px"},attrs:{formData:e.teachersForm},on:{closeTeachersDialog:function(t){return e.closeTeachersDialog(t)}}}):e._e(),e.isStudentsForm?s("Form",{staticStyle:{width:"400px"},attrs:{formData:e.studentsForm},on:{closeStudentsDialog:function(t){return e.closeStudentsDialog(t)}}}):e._e(),e.isSubjectsForm?s("Form",{staticStyle:{width:"400px"},attrs:{formData:e.subjectsForm},on:{closeSubjectsDialog:function(t){return e.closeSubjectsDialog(t)}}}):e._e(),e.isChartForm?s("Form",{attrs:{formData:e.chartForm},on:{Plot:function(t){return e.Plot(t)}}}):e._e()],1)}))],2)},a=[],r=(s("23bf"),s("06db"),s("8a81"),s("1c4c"),s("5df3"),s("cadf"),s("ac6a"),s("456d"),s("d25f"),s("9986"),s("8e6e"),s("c47a")),n=s.n(r),i=s("fa84"),l=s.n(i),c=s("967e"),u=s.n(c),m=(s("7f7f"),s("6d67"),s("7514"),s("9bff")),d=s("9437"),f=s("39b2"),h=s("6132"),p=s("72da"),b=s("3a3c"),g=s("0f57"),S=s("61cc"),v=s.n(S),y={title:"Configure Result Analysis",qSelects:[{label:"Type of Instructor",value:"",type:"text",list:[],actionName:"typeOfInstructor",visible:!0},{label:"Class Room",value:"",type:"text",list:[],actionName:"classRoom",visible:!0}],qInputs:[],qBtns:[{label:"Instructors",name:"showTeachersDialog",icon:"escalator_warning"},{label:"Students",name:"showStudentsDialog",icon:"groups"},{label:"Subjects",name:"showSubjectsDialog",icon:"book"},{label:"Compute",name:"Compute",icon:"calculate"}],qDates:[{label:"Start Date",name:"2019/02/01"},{label:"End Date",name:"2019/02/01"}],GroupedCheckBoxes:[]},F={title:"Subjects",qSelects:[],qInputs:[],qBtns:[{label:"Done",name:"closeSubjectsDialog",icon:"done"}],qDates:[],GroupedCheckBoxes:[{isGroupedCheckBox:!0,isExpanded:!0,list:[],group:[],label:"Subjects"}]},D={title:"Students",qSelects:[],qInputs:[],qBtns:[{label:"Done",name:"closeStudentsDialog",icon:"done"}],qDates:[],GroupedCheckBoxes:[{isGroupedCheckBox:!0,isExpanded:!0,list:[],group:[],label:"Students"}]},C={title:"Instructors",qSelects:[],qInputs:[],qBtns:[{label:"Done",name:"closeTeachersDialog",icon:"done"}],qDates:[],GroupedCheckBoxes:[{isGroupedCheckBox:!0,isExpanded:!0,list:[],group:[],label:"Teachers"}]},w={title:"Configure Chart",qSelects:[{label:"Horizontal Parameter",value:"",type:"text",list:[],actionName:"",visible:!0},{label:"Vertical Parameter",value:"",type:"text",list:[],actionName:"",visible:!0}],qInputs:[],qBtns:[{label:"Plot",name:"Plot",icon:"done"}],qDates:[],GroupedCheckBox:[]},q={selectedResult:{},title:"Students' Results Position",columns:[],rows:[],separator:"cell"},x=[{title:"Configure Result Analysis",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Subjects",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Students",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Instructors",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Configure Chart",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"}];function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){n()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t){var s="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=I(e))||t&&e&&"number"===typeof e.length){s&&(e=s);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,i=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){i=!0,r=e},f:function(){try{n||null==s.return||s.return()}finally{if(i)throw r}}}}function I(e,t){if(e){if("string"===typeof e)return T(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,o=new Array(t);s<t;s++)o[s]=e[s];return o}var R={components:{MessageBox:m["a"],Form:d["a"],Table:b["a"],Chart:g["a"]},data:function(){return{isForm:!0,isSubjectsForm:!1,isStudentsForm:!1,isTeachersForm:!1,isHeader:!1,isResponsive:!1,isExpanded:!0,isTable:!0,form:y,chartForm:w,tableVM:q,layout:{},seriesCollection:[],dialogs:x,studentFullName:"",subjectsForm:F,studentsForm:D,teachersForm:C,isChartForm:!1}},methods:{showTeachersDialog:function(){var e=this;e.isForm=!1,e.isTeachersForm=!0,e.dialogFailureOrScuess("Instructors",!0),e.dialogFailureOrScuess("Configure Result Analysis",!1)},showStudentsDialog:function(){var e=this;e.isForm=!1,e.isStudentsForm=!0,e.dialogFailureOrScuess("Students",!0),e.dialogFailureOrScuess("Configure Result Analysis",!1)},showSubjectsDialog:function(){var e=this;e.isForm=!1,e.isSubjectsForm=!0,e.dialogFailureOrScuess("Subjects",!0),e.dialogFailureOrScuess("Configure Result Analysis",!1)},showChartConfigDialog:function(){var e=this;e.isChartForm=!0,e.dialogFailureOrScuess("Configure Chart",!0)},dialogFailureOrScuess:function(e,t){var s,o=this,a=-1,r=k(o.dialogs);try{for(r.s();!(s=r.n()).done;){var n=s.value;if(a++,n.title==e){o.dialogs[a].isVisible=t;break}}}catch(i){r.e(i)}finally{r.f()}},closeTeachersDialog:function(){var e=this;e.isForm=!0,e.isTeachersForm=!1,e.dialogFailureOrScuess("Instructors",!1),e.dialogFailureOrScuess("Configure Result Analysis",!0)},closeStudentsDialog:function(){var e=this;e.isForm=!0,e.isStudentsForm=!1,e.dialogFailureOrScuess("Students",!1),e.dialogFailureOrScuess("Configure Result Analysis",!0)},closeSubjectsDialog:function(){var e=this;e.isForm=!0,e.isSubjectsForm=!1,e.dialogFailureOrScuess("Subjects",!1),e.dialogFailureOrScuess("Configure Result Analysis",!0)},ShowResultConfiDialog:function(){var e=this;e.isForm=!0,e.dialogFailureOrScuess("Configure Result Analysis",!0)},Compute:function(){var e=this;return l()(u.a.mark((function t(){var s,o,a,r,n,i,l,c,m,d,h;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,o=e.$store.getters["authenticationStore/IdentityModel"],a="result/summarizedstudentspositions",r={url:a,req:{startDate:s.form.qDates[0].name,endDate:s.form.qDates[1].name,subjectIds:s.subjectsForm.GroupedCheckBoxes[0].group,teacherIds:s.teachersForm.GroupedCheckBoxes[0].group,studentIds:s.studentsForm.GroupedCheckBoxes[0].group,classroomId:s.form.qSelects[1].value,schoolId:o.schoolId}},t.next=6,Object(f["b"])(r);case 6:n=t.sent,i=n.data,l=i.data,i.message,c=i.success,c&&(console.log("result: ",l),m=Object(p["c"])(l),d=m.columns,h=m.rows,s.isExpanded=!0,s.tableVM.columns=d,s.tableVM.rows=h,s.isTable=!0,s.configurePlotData()),s.isForm=!1,s.dialogFailureOrScuess("Configure Result Analysis",!1);case 11:case"end":return t.stop()}}),t)})))()},configurePlotData:function(){var e=this;e.chartForm.qSelects[0].list=e.tableVM.columns.map((function(e,t){return{id:t+1,value:t+1,type:e.label,name:e.name}})),e.chartForm.qSelects[0].value=e.chartForm.qSelects[0].list[0].id,e.chartForm.qSelects[1].list=e.tableVM.columns.map((function(e,t){return console.log("column.scoreMax: ",e.scoreMax),{id:t+1,value:t+1,type:e.label,name:e.name,scoreMax:e.scoreMax}})),e.chartForm.qSelects[1].value=e.chartForm.qSelects[1].list[1].id},typeOfInstructor:function(e){var t=this;return l()(u.a.mark((function s(){var o,a,r;return u.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return o=t,a=t.$store.getters["authenticationStore/IdentityModel"],s.next=4,Object(h["c"])(e.value,a.schoolId);case 4:r=s.sent,t.$store.commit("userStore/SetTeachers",r.result),o.teachersForm.GroupedCheckBoxes[0].list=r.result.map((function(e){return j(j({},e),{},{label:"".concat(e.firstName," ").concat(e.lastName),value:e.id})}));case 7:case"end":return s.stop()}}),s)})))()},loadConfigData:function(){var e=this;return l()(u.a.mark((function t(){var s;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e,s.form.qSelects[0].list=e.$store.getters["staffStore/staffs"],!(s.form.qSelects[0].list.length>0)){t.next=5;break}return t.next=5,s.typeOfInstructor({value:s.form.qSelects[0].list[0].id});case 5:s.form.qSelects[1].list=e.$store.getters["classRoomStore/classRooms"],console.log("classRooms: ",s.form.qSelects[1].list),s.form.qSelects[1].list.length>0&&(s.form.qSelects[1].value=s.form.qSelects[1].list[0].id),s.subjectsForm.GroupedCheckBoxes[0].list=e.$store.getters["subjectStore/subjects"].map((function(e){return j(j({},e),{},{label:e.type,value:e.id})})),s.studentsForm.GroupedCheckBoxes[0].list=e.$store.getters["studentStore/students"].map((function(e){return j(j({},e),{},{label:"".concat(e.firstName," ").concat(e.lastName),value:e.id})}));case 10:case"end":return t.stop()}}),t)})))()},Plot:function(){var e=this;e.isTable=!1,!1===e.isTable&&(e.RefreshPlot(),e.isChartForm=!1,e.dialogFailureOrScuess("Configure Chart",!1))},RefreshPlot:function(){var e=this,t=e.chartForm.qSelects[0].value,s=e.chartForm.qSelects[0].list.find((function(e){return e.value===t})),o=e.tableVM.rows.map((function(e){return e[s.name]})),a=e.chartForm.qSelects[1].value,r=e.chartForm.qSelects[1].list.find((function(e){return e.value===a})),n=e.tableVM.rows.map((function(e){return e[r.name]}));e.layout={title:"".concat(s.type," vs ").concat(r.type),font:{},showlegend:!0,yaxis:{title:"".concat(r.type),zeroline:!1},bargap:.05},e.seriesCollection=[],e.seriesCollection.push({x:o,y:n,name:"Scores",type:"bar",marker:{color:"green",line:{width:2.5}}}),v.a.newPlot("myDiv",e.seriesCollection,e.layout),e.isTable=!1}},mounted:function(){var e=this;!1===e.isTable&&(console.log("seen"),e.RefreshPlot())},created:function(){var e=this;return l()(u.a.mark((function t(){var s;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,t.next=3,s.loadConfigData();case 3:return t.next=5,s.ShowResultConfiDialog();case 5:case"end":return t.stop()}}),t)})))()}},P=R,B=s("2877"),E=s("65c6"),V=s("9c40"),M=s("2c91"),A=s("24e8"),_=s("eebe"),G=s.n(_),N=Object(B["a"])(P,o,a,!1,null,null,null);t["default"]=N.exports;G()(N,"components",{QToolbar:E["a"],QBtn:V["a"],QSpace:M["a"],QDialog:A["a"]})}}]);