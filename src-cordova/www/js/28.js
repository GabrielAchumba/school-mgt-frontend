(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"482a":function(e,t,a){},9771:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"q-pa-sm col-12 text-center"},[a("q-select",{attrs:{color:"accent",outlined:"","label-color":"accent",options:e.categories,label:"Category"},on:{input:e.onItemValueChanged},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),e.showSpinner?e._e():a("div",{staticClass:"q-pa-sm col-12 text-center"},e._l(e.cardList,(function(t){return a("div",{key:t.idd,staticClass:"row bg-primary q-pa-none q-ma-none"},[a("RecentChat",{staticClass:"q-pa-sm col-12",attrs:{selectedRow:t,fileUrl:t.friendImage,title:t.fullName,description:t.content,date:t.createdDate,noUnreadMessages:t.noUnreadMessages},on:{viewChat:function(t){return e.viewChat(t)}}})],1)})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showSpinner,expression:"showSpinner"}],staticClass:"q-gutter-md row"},[a("div",{staticClass:"col-12 q-pa-sm absolute-center flex flex-center"},[a("q-spinner",{attrs:{color:"accent",size:e.spinnerSize,thickness:e.spinnerThickness}})],1)]),e._l(e.dialogs,(function(t){return a("q-dialog",{key:t.title,model:{value:t.isVisible,callback:function(a){e.$set(t,"isVisible",a)},expression:"dialog.isVisible"}},[a("MessageBox",{attrs:{title:t.title,message:t.message,okayEvent:t.okayEvent,cancelEvent:t.cancelEvent},on:{cancelDialog:function(t){return e.cancelDialog(t)},okDialog:function(t){return e.okDialog(t)}}})],1)}))],2)},n=[],s=(a("d38f"),a("b7dd"),a("1a43"),a("0012"),a("6212"),a("950c"),a("2bf3"),a("5b54"),a("ef92"),a("f69e"),a("ad58"),a("d93a"),a("9289")),o=a.n(s),i=a("549c"),c=a.n(i),l=(a("c889"),a("52b5")),u=a.n(l),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row bg-primary text-accent q-pa-sm no-wrap"},[a("div",{staticClass:"q-pa-sm text-caption text-left"},[a("q-btn",{staticClass:"text-capitalize",attrs:{flat:"",size:e.size}},[a("q-avatar",{staticClass:"bg-accent text-primary text-center",attrs:{round:"",size:"50px"}},[e.fileUrl?a("img",{attrs:{src:e.fileUrl}}):a("p",{staticClass:"q-pa-sm text-center"},[e._v(e._s(e.title.charAt(0)))])])],1)],1),a("q-space"),a("div",{staticClass:"q-pa-sm text-left",on:{click:e.viewChat}},[a("span",[a("p",{staticClass:"q-pa-none q-ma-none text-left"},[a("b",[e._v(e._s(e.title))])]),a("p",{staticClass:"text-left"},[e._v(e._s(e.description))])])]),a("q-space"),a("div",{staticClass:"q-pa-sm text-right"},[a("span",[a("p",{staticClass:"q-pa-none q-ma-none text-caption text-right"},[e._v(e._s(e.date))]),a("q-badge",{attrs:{color:"accent"}},[e._v("\n                "+e._s(e.noUnreadMessages)+"\n                ")])],1)])],1)},g=[],p={props:{fileUrl:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},date:{type:String,default:"January 5, 2022"},noUnreadMessages:{type:String,default:""},selectedRow:{type:Object,default:function(){}}},data:function(){return{dense:!1,size:"md"}},methods:{viewChat:function(){var e=this;this.$emit("viewChat",e.selectedRow)}}},f=p,m=(a("efc1"),a("a6c2")),h=a("66cf"),y=a("ef9c"),b=a("d6e3"),v=a("dc01"),w=a("ec38"),C=a("63c1"),S=a.n(C),k=Object(m["a"])(f,d,g,!1,null,"b772afe4",null),x=k.exports;S()(k,"components",{QToolbar:h["a"],QBtn:y["a"],QAvatar:b["a"],QSpace:v["a"],QBadge:w["a"]});var I=a("0588"),U=a("0601");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=N(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw s}}}}function N(e,t){if(e){if("string"===typeof e)return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var $={computed:{showSpinner:function(){return this.$store.getters["authenticationStore/showSpinner"]},spinnerSize:function(){return this.$store.getters["authenticationStore/spinnerSize"]},spinnerThickness:function(){return this.$store.getters["authenticationStore/spinnerThickness"]}},components:{RecentChat:x,MessageBox:I["a"]},data:function(){return{cardList:[],fromUser:{},categories:["CategoryN500","CategoryN1000","CategoryN2000","CategoryN5000","CategoryN10000"],category:"CategoryN500",tableVM:{selectedFileModel:{},title:"Stories",columns:[{name:"actions",label:"Actions",field:"",align:"left",type:""},{name:"message",label:"Message",field:"",align:"left",type:"text"}],rows:[],separator:"cell",createItem:"createStory",updateItem:"updateItem",deleteItem:"deleteStory",createItemUrl:"/create-chat",updateItemUrl:"/update-chat"},dialogs:[{title:"Delete Story",isVisible:!1,message:"Do you want to delete a story",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Success",isVisible:!1,message:"Story deleted successfully!",okayEvent:"okDialog",cancelEvent:"cancelDialog"},{title:"Failure",isVisible:!1,message:"",okayEvent:"okDialog",cancelEvent:"cancelDialog"}],recentChats:[{friendImage:"/statics/images/levels.jpg",friendFullName:"John Williams",fromId:"",toId:"",groupName:"Chat",message:"Who do you think will emerge the president of Nigeria in the forthcoming 2023 election",meetingId:"",schoolId:"",createdAt:Date.now()},{friendImage:"/statics/images/sessions.jpg",friendFullName:"Austin Ore",fromId:"",toId:"",groupName:"Story",message:"In my own statistics, Peter Obi will emerge as the president of Nigeria",meetingId:"",schoolId:"",createdAt:Date.now()}]}},methods:{okayEvent:function(){var e=this;e.isFetchTableDialog=!1},cancelEvent:function(){var e=this;e.isFetchTableDialog=!1},createFileModel:function(){var e=this;console.log(e.tableVM.createItemUrl),this.$router.push(e.tableVM.createItemUrl)},updateItem:function(e){var t=this;this.$store.commit("FileModelStore/SetSelectedFileModel",e),this.$router.push(t.tableVM.updateItemUrl)},deleteFileModel:function(e){var t=this;t.selectedFileModel=e,console.log(t.selectedFileModel),t.dialogs[0].isVisible=!0},cancelDialog:function(e){var t,a=this,r=-1,n=M(a.dialogs);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(r++,s.title===e){a.dialogs[r].isVisible=!1;break}}}catch(o){n.e(o)}finally{n.f()}},delete:function(){var e=this;return c()(u.a.mark((function t(){var a,r,n,s,o,i,c,l;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=e.$store.getters["authenticationStore/IdentityModel"],n="filemanagement/".concat(a.selectedFileModel.id,"/").concat(r.schoolId),s={url:n},console.log("payload: ",s),t.next=7,Object(U["b"])(s);case 7:o=t.sent,i=o.data,c=i.message,l=i.success,l?a.dialogs[1].isVisible=!0:(a.dialogs[2].message=c,a.dialogs[2].isVisible=!0);case 10:case"end":return t.stop()}}),t)})))()},okDialog:function(e){var t=this;return c()(u.a.mark((function a(){var r,n,s,o,i;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log("payload: ",e),r=t,n=-1,s=M(r.dialogs),a.prev=4,s.s();case 6:if((o=s.n()).done){a.next=23;break}if(i=o.value,n++,i.title!==e){a.next=21;break}a.t0=e,a.next="Delete FileModel"===a.t0?13:"Success"===a.t0?16:19;break;case 13:return a.next=15,r.delete();case 15:return a.abrupt("break",19);case 16:return a.next=18,r._loadRecentChats();case 18:return a.abrupt("break",19);case 19:return r.dialogs[n].isVisible=!1,a.abrupt("break",23);case 21:a.next=6;break;case 23:a.next=28;break;case 25:a.prev=25,a.t1=a["catch"](4),s.e(a.t1);case 28:return a.prev=28,s.f(),a.finish(28);case 31:case"end":return a.stop()}}),a,null,[[4,25,28,31]])})))()},_loadRecentChats:function(){var e=this;return c()(u.a.mark((function t(){var a,r,n;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.cardList=[],t.t0=a.category,t.next="CategoryN500"===t.t0?5:"CategoryN1000"===t.t0?7:"CategoryN2000"===t.t0?9:"CategoryN5000"===t.t0?11:"CategoryN10000"===t.t0?13:15;break;case 5:return a.fromUser=e.$store.getters["authenticationStore/categoryN500User"],t.abrupt("break",15);case 7:return a.fromUser=e.$store.getters["authenticationStore/categoryN1000User"],t.abrupt("break",15);case 9:return a.fromUser=e.$store.getters["authenticationStore/categoryN2000User"],t.abrupt("break",15);case 11:return a.fromUser=e.$store.getters["authenticationStore/categoryN5000User"],t.abrupt("break",15);case 13:return a.fromUser=e.$store.getters["authenticationStore/categoryN10000User"],t.abrupt("break",15);case 15:return r={url:"launchstory/uniqueMessagesByFriends",req:{id:a.fromUser.categoryId,selectedCategory:a.category}},console.log("payload: ",r),t.next=19,Object(U["a"])(r);case 19:n=t.sent,console.log("response: ",n),n.data.length>0&&(a.cardList=n.data.map((function(e,t){var a=e.message;return a.length>50&&(a=e.message.substr(0,50)),q(q({idd:t+1},e),{},{fullName:e.fromFullName,noUnreadMessages:"1",name:"showPage",createdDate:new Date(e.createdAt).toDateString(),qBtns:[],content:a+"..."})})));case 22:case"end":return t.stop()}}),t)})))()},onItemValueChanged:function(){var e=this;return c()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a._loadRecentChats();case 3:case"end":return t.stop()}}),t)})))()},viewChat:function(e){var t=this;e.categoryId=e.fromId,e.username=e.fromUserName,console.log("selectedRow: ",e),this.$store.commit("authenticationStore/setToUser",e),this.$store.commit("dashboardStore/setSelectedCategory",t.category),this.$router.push("/view-chat")}},created:function(){var e=this;return c()(u.a.mark((function t(){var a,r;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=e.$store.getters["authenticationStore/IdentityModel"],"CEO"===r.schoolId&&(a.tableVM.createItemUrl="/socialize-create-story",a.tableVM.updateItemUrl="/socialize-update-story"),a.category=e.$store.getters["dashboardStore/selectedCategory"],t.next=6,a._loadRecentChats();case 6:case"end":return t.stop()}}),t)})))()}},j=$,_=a("f636"),V=a("692f"),E=a("e0e9"),F=a("c99e"),A=a("ec6d"),z=a("a561"),R=Object(m["a"])(j,r,n,!1,null,null,null);t["default"]=R.exports;S()(R,"components",{QSelect:_["a"],QList:V["a"],QItem:E["a"],QSpinner:F["a"],QDialog:A["a"]}),S()(R,"directives",{Ripple:z["a"]})},efc1:function(e,t,a){"use strict";var r=a("482a"),n=a.n(r);n.a}}]);