(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"435b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-sm"},[a("div",{staticClass:"row"},[a("q-toolbar",{staticClass:"col-12 bg-accent"},[a("q-btn",{staticClass:"text-capitalize",attrs:{icon:"edit",flat:""}},[a("q-menu",{attrs:{fit:""}},[a("Form",{staticStyle:{width:"400px"},attrs:{formData:e.form},on:{Compute:function(t){return e.Compute(t)},typeOfInstructor:function(t){return e.typeOfInstructor(t)},handleAddGrouppedScoresTable:function(t){return e.handleAddGrouppedScoresTable(t)},handleSubmitGrouppedScoresTable:function(t){return e.handleSubmitGrouppedScoresTable(t)},handleEditGrouppedScoresTable:function(t){return e.handleEditGrouppedScoresTable(t)},handleDeleteGrouppedScoresTable:function(t){return e.handleDeleteGrouppedScoresTable(t)}}})],1)],1),a("q-space"),e.isExpanded?a("q-btn",{staticClass:"text-capitalize",attrs:{flat:"",icon:"bar_chart"}},[a("q-menu",{attrs:{fit:""}},[a("Form",{attrs:{formData:e.chartForm},on:{Plot:function(t){return e.Plot(t)}}})],1)],1):e._e()],1)],1),a("div",{staticClass:"row q-pa-sm"},[e.isTable?a("div",{staticClass:"col-12"},[a("Table",{attrs:{table_VM:e.tableVM,isResponsive:e.isResponsive,isHeader:e.isHeader}})],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTable,expression:"!isTable"}],staticClass:"col-12 q-pa-sm",attrs:{id:"myDiv"}})])])},o=[],s=(a("ef92"),a("0012"),a("f69e"),a("ad58"),a("d93a"),a("549c")),l=a.n(s),n=a("9289"),c=a.n(n),i=a("52b5"),u=a.n(i),d=(a("1a43"),a("c889"),a("8ade"),a("0588")),p=a("82f4"),m=a("5dc2"),b=a("940b"),f=a("b311"),h=a("785a"),v=a("a969"),S=a("1b21"),y=a.n(S);a("ed8e");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q={title:"Configure Result Report",qSelects:[{label:"Class Room",value:"",type:"text",list:[],actionName:"classRoom",visible:!0},{label:"Subject",value:"",type:"text",list:[],actionName:"subject",visible:!0},{label:"Type of Instructor",value:"",type:"text",list:[],actionName:"typeOfInstructor",visible:!0}],qInputs:[],qBtns:[{label:"Compute",name:"Compute"}],qDates:[{label:"Start Date",name:"2019/02/01"},{label:"End Date",name:"2019/02/01"}],GroupedCheckBoxes:[{isGroupedCheckBox:!0,isExpanded:!0,list:[],group:[],label:"Teachers"}],tables:[O({},editableTableVM)]},x={title:"Configure Chart",qSelects:[{label:"Horizontal Parameter",value:"",type:"text",list:[],actionName:"",visible:!0},{label:"Vertical Parameter",value:"",type:"text",list:[],actionName:"",visible:!0}],qInputs:[],qBtns:[{label:"Plot",name:"Plot"}],qDates:[],GroupedCheckBoxes:[],tables:[]},g={selectedResult:{},title:"Summary Report",columns:[],rows:[],separator:"cell"};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C={components:{MessageBox:d["a"],Form:p["a"],Table:h["a"],Chart:v["default"]},data:function(){return{isHeader:!1,isResponsive:!1,isExpanded:!0,isTable:!0,form:q,chartForm:x,tableVM:g,layout:{},seriesCollection:[],GrouppedScoresRow:{from:0,to:100,numberOfStudents:1}}},methods:{handleAddGrouppedScoresTable:function(e){var t=this,a=e.id-1,r=Date.now();t.form.tables[a].rowUpdate={edit:!0,id:r,action:"add",data:j({id:r},t.tablesGrouppedScoresRow)}},handleSubmitGrouppedScoresTable:function(e){var t=this,a=e.tableVM.id-1;t.form.tables[a].rowUpdate={edit:!1,id:e.data.id,action:e.update?"update":"cancel"}},handleEditGrouppedScoresTable:function(e){var t=this,a=e.tableVM.id-1;t.form.tables[a].rowUpdate={edit:!0,id:e.data.id}},handleDeleteGrouppedScoresTable:function(e){var t=this,a=e.tableVM.id-1;t.form.tables[a].rowUpdate={id:e.data.id,action:"delete"}},Compute:function(){var e=this;return l()(u.a.mark((function t(){var a,r,o,s,l,n,c,i,d,p,b;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=e.$store.getters["authenticationStore/IdentityModel"],o="result/summarizedstudentsresult",s={url:o,req:{startDate:a.form.qDates[0].name,endDate:a.form.qDates[1].name,teacherIds:a.form.GroupedCheckBoxes[0].group,subjectId:a.form.qSelects[1].value,classroomId:a.form.qSelects[0].value,schoolId:r.schoolId,rangeOfScores:a.form.tables[0].items}},t.next=6,Object(m["b"])(s);case 6:l=t.sent,n=l.data,c=n.data,n.message,i=n.success,i&&(d=Object(f["a"])(c),p=d.columns,b=d.rows,a.isExpanded=!0,a.tableVM.columns=p,a.tableVM.rows=b,a.isTable=!0,a.configurePlotData());case 9:case"end":return t.stop()}}),t)})))()},configurePlotData:function(){var e=this;e.chartForm.qSelects[0].list=e.tableVM.columns.map((function(e,t){return{id:t+1,value:t+1,type:e.label,name:e.name}})),e.chartForm.qSelects[0].value=e.chartForm.qSelects[0].list[0].id,e.chartForm.qSelects[1].list=e.tableVM.columns.map((function(e,t){return console.log("column.scoreMax: ",e.scoreMax),{id:t+1,value:t+1,type:e.label,name:e.name,scoreMax:e.scoreMax}})),e.chartForm.qSelects[1].value=e.chartForm.qSelects[1].list[1].id},typeOfInstructor:function(e){var t=this;return l()(u.a.mark((function a(){var r,o,s;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,o=t.$store.getters["authenticationStore/IdentityModel"],a.next=4,Object(b["c"])(e.value,o.schoolId);case 4:s=a.sent,t.$store.commit("userStore/SetTeachers",s.result),r.form.GroupedCheckBoxes[0].list=s.result.map((function(e){return j(j({},e),{},{label:"".concat(e.firstName," ").concat(e.lastName),value:e.id})}));case 7:case"end":return a.stop()}}),a)})))()},loadConfigData:function(){var e=this;return l()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.form.qSelects[0].list=e.$store.getters["classRoomStore/classRooms"],a.form.qSelects[0].list.length>0&&(a.form.qSelects[0].value=a.form.qSelects[0].list[0].id),a.form.qSelects[1].list=e.$store.getters["subjectsStore/subjects"],a.form.qSelects[1].list.length>0&&(a.form.qSelects[1].value=a.form.qSelects[1].list[0].id),a.form.qSelects[2].list=e.$store.getters["staffStore/staffs"],!(a.form.qSelects[2].list.length>0)){t.next=9;break}return t.next=9,a.typeOfInstructor({value:a.form.qSelects[2].list[0].id});case 9:a.form.tables[0].id=1,a.form.tables[0].visible=!0,a.form.tables[0].handleAddName="handleAddGrouppedScoresTable",a.form.tables[0].handleSubmitName="handleSubmitGrouppedScoresTable",a.form.tables[0].handleEditName="handleEditGrouppedScoresTable",a.form.tables[0].handleDeleteName="handleDeleteGrouppedScoresTable",a.form.tables[0].rowUpdate={},a.form.tables[0].fields=[{key:"delete",label:""},{key:"from",label:"From",type:"text",editable:!0,class:"name-col"},{key:"to",label:"To",type:"text",editable:!0,class:"name-col"},{key:"numberOfStudents",label:"Number Of Students",type:"text",editable:!0,class:"name-col"},{key:"edit",label:""}],a.form.tables[0].items=[j({},a.GrouppedScoresRow)];case 18:case"end":return t.stop()}}),t)})))()},Plot:function(){var e=this;e.isTable=!1,!1===e.isTable&&e.RefreshPlot()},RefreshPlot:function(){var e=this,t=e.chartForm.qSelects[0].value,a=e.chartForm.qSelects[0].list.find((function(e){return e.value===t})),r=e.tableVM.rows.map((function(e){return e[a.name]})),o=e.chartForm.qSelects[1].value,s=e.chartForm.qSelects[1].list.find((function(e){return e.value===o})),l=e.tableVM.rows.map((function(e){return e[s.name]})),n=l.map((function(e){return s.scoreMax-e}));e.layout={title:"".concat(a.type," vs ").concat(s.type),barmode:"stack",font:{},showlegend:!0,yaxis:{title:"".concat(s.type),zeroline:!1},bargap:.05},e.seriesCollection=[],e.seriesCollection.push({x:r,y:l,name:"Scores",type:"bar",marker:{color:"green",line:{width:2.5}}}),e.seriesCollection.push({x:r,y:n,name:"Maximum Score",type:"bar",marker:{color:"orange",line:{width:2.5}}}),y.a.newPlot("myDiv",e.seriesCollection,e.layout),e.isTable=!1}},mounted:function(){var e=this;!1===e.isTable&&e.RefreshPlot()},created:function(){var e=this;return l()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.loadConfigData();case 3:case"end":return t.stop()}}),t)})))()}},D=C,P=a("a6c2"),G=a("66cf"),M=a("ef9c"),k=a("6496"),R=a("dc01"),F=a("63c1"),I=a.n(F),E=Object(P["a"])(D,r,o,!1,null,null,null);t["default"]=E.exports;I()(E,"components",{QToolbar:G["a"],QBtn:M["a"],QMenu:k["a"],QSpace:R["a"]})}}]);