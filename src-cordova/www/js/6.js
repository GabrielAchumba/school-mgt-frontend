(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"4c15":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showSpinner?e._e():a("div",{staticClass:"row"},[e._m(0),e.isAdmin?e._e():a("Form",{staticClass:"col-12 q-pa-sm",attrs:{formData:e.form},on:{onFileSelected:function(t){return e.onFileSelected(t)}}}),a("div",{staticClass:"col-12 q-pa-sm text-center"},[a("q-input",{staticClass:"q-pa-sm",attrs:{outlined:"",label:"Phone Number *","lazy-rules":""},model:{value:e.ContactDTO.phoneNumber,callback:function(t){e.$set(e.ContactDTO,"phoneNumber",t)},expression:"ContactDTO.phoneNumber"}}),a("q-input",{staticClass:"q-pa-sm",attrs:{outlined:"",label:"Email Address ","lazy-rules":""},model:{value:e.ContactDTO.email,callback:function(t){e.$set(e.ContactDTO,"email",t)},expression:"ContactDTO.email"}}),a("q-input",{staticClass:"q-pa-sm",attrs:{outlined:"",label:"Residential City","lazy-rules":""},model:{value:e.ContactDTO.residentialCity,callback:function(t){e.$set(e.ContactDTO,"residentialCity",t)},expression:"ContactDTO.residentialCity"}}),a("q-input",{staticClass:"q-pa-sm",attrs:{outlined:"",label:"Residential State","lazy-rules":""},model:{value:e.ContactDTO.residentialState,callback:function(t){e.$set(e.ContactDTO,"residentialState",t)},expression:"ContactDTO.residentialState"}}),a("q-input",{staticClass:"q-pa-sm",attrs:{outlined:"",type:"textarea",label:"Address","lazy-rules":""},model:{value:e.ContactDTO.address,callback:function(t){e.$set(e.ContactDTO,"address",t)},expression:"ContactDTO.address"}})],1),a("div",{staticClass:"col-12 text-center q-pa-sm"},[a("q-btn",{staticClass:"q-ma-sm bg-accent text-primary",staticStyle:{width:"95%"},attrs:{label:"Cancel",type:"button",size:"md","no-caps":""},on:{click:e.cancel}})],1),a("StatusBar",{staticClass:"col-12 text-center q-pa-sm",attrs:{savingStatus:e.savingStatus,message:e.message,saveComplete:e.saveComplete,saveError:e.saveError},on:{updateStatusBar:e.updateStatusBar}}),a("div",{staticClass:"col-12 text-center q-pa-sm"},[a("q-btn",{staticClass:"q-ma-sm bg-accent text-primary",staticStyle:{width:"95%"},attrs:{label:"Update",type:"button",size:"md","no-caps":""},on:{click:e.updateData}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showSpinner,expression:"showSpinner"}],staticClass:"q-gutter-md row"},[a("div",{staticClass:"col-12 q-pa-sm absolute-center flex flex-center"},[a("q-spinner",{attrs:{color:"accent",size:e.spinnerSize,thickness:e.spinnerThickness}})],1)]),a("q-dialog",{model:{value:e.isUpdateDialog,callback:function(t){e.isUpdateDialog=t},expression:"isUpdateDialog"}},[a("MessageBox",{attrs:{title:"Update Contact",message:"Do you want to update your contact?",okayEvent:"uploadAndUpdate",cancelEvent:"cancelUpdate"},on:{cancelUpdate:function(t){return e.cancelUpdate(t)},uploadAndUpdate:function(t){return e.uploadAndUpdate(t)}}})],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12 q-pa-sm text-center"},[a("div",{staticClass:"col text-h6 text-center"},[e._v("\n         Contact Data\n       ")])])}],n=(a("ef92"),a("0012"),a("f69e"),a("ad58"),a("d93a"),a("9289")),r=a.n(n),o=a("549c"),l=a.n(o),c=a("52b5"),u=a.n(c),d=(a("1a43"),a("0588")),p=a("639b"),m=a("2091"),f=a("0601"),h=a("b985"),v=a("5dc2");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={computed:{selectedContact:function(){return this.$store.getters["clientStore/selectedContact"]},isAdmin:function(){return this.$store.getters["clientStore/isAdmin"]},IdentityModel:function(){return this.$store.getters["authenticationStore/IdentityModel"]},PhotoDto:function(){return this.$store.getters["clientStore/PhotoDto"]},showSpinner:function(){return this.$store.getters["authenticationStore/showSpinner"]},spinnerSize:function(){return this.$store.getters["authenticationStore/spinnerSize"]},spinnerThickness:function(){return this.$store.getters["authenticationStore/spinnerThickness"]}},components:{MessageBox:d["a"],Form:p["a"],StatusBar:m["a"]},data:function(){return{fileUrl:"",fileName:"",originalFileName:"",fileUploadError:"No Error",ContactDTO:{phoneNumber:"",email:"",address:"",residentialCity:"",residentialState:""},isUpdateDialog:!1,isUpdateSuccessDialog:!1,isUpdateFailureDialog:!1,message:"",savingStatus:"",SelectedFile:null,files:null,isUploadFileDialog:!1,isUploadFileSuccessDialog:!1,isUploadFileFailureDialog:!1,saveError:!1,saveComplete:!1,count:0,minutes:0,seconds:0,form:{title:"User Photo",qSelects:[],qInputs:[],qFiles:[{label:"Picture (1MB Maximum)",name:"",type:"file",selectedFile:null,showPreview:!1,imagePreview:"",files:[],Template:{sn:0,iconName:"",visible:!1}}],qColors:[],qBtns:[],qDates:[],GroupedCheckBoxes:[],clearQInputs:function(){var e=0;for(e=0;e<this.qInputs.length;e++)this.qInputs[e].name=""},clearQFiles:function(){var e=0;for(e=0;e<this.qFiles.length;e++)this.qFiles[e].name=""}}}},props:{theme_color:{type:String,default:"rgb(0, 163, 82)"}},methods:{onFileSelected:function(e){var t=this;t.isUploadFileDialog=!1,t.form.qFiles[0].selectedFile=e.selectedFile;var a=new FileReader;a.addEventListener("load",function(){t.form.qFiles[0].showPreview=!0,t.form.qFiles[0].imagePreview=a.result,t.isUploadFileDialog=!0}.bind(t),!1),t.form.qFiles[0].selectedFile&&(/\.(jpe?g|png|gif)$/i.test(t.form.qFiles[0].selectedFile.name)?a.readAsDataURL(t.form.qFiles[0].selectedFile):alert("Wrong image format. Only supports .jpg, .jpeg, .png and .gif"))},UploadAction:function(){var e=this;e.isUploadFileDialog=!0},cancelUploadFile:function(){var e=this;e.isUploadFileDialog=!1},uploadPicture:function(){var e=this;return l()(u.a.mark((function t(){var a,s,i,n,r;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,s=new FormData,console.log("selectedFile: ",a.form.qFiles[0].selectedFile),s.append("file",a.form.qFiles[0].selectedFile),i="gcp/upload",n={url:i,req:s},console.log("payload: ",n),t.prev=7,t.next=10,f["a"](n);case 10:r=t.sent,a.fileUrl=r.data.url,a.fileName=r.data.fileName,a.originalFileName=r.data.originalFileName,a.fileUploadError=r.data.error,"No Error"!==a.fileUploadError&&(a.saveError=!1,a.message=a.fileUploadError),console.log("fileUrl: ",a.fileUrl),t.next=26;break;case 19:t.prev=19,t.t0=t["catch"](7),a.saveError=!0,a.saveComplete=!1,a.fileUploadError="File upload error",a.message=a.fileUploadError,a.savingStatus="";case 26:case"end":return t.stop()}}),t,null,[[7,19]])})))()},uploadAndUpdate:function(){var e=this;return l()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.saveError=!1,a.saveComplete=!1,a.savingStatus="Updating...",!a.form.qFiles[0].imagePreview||!0!==a.isUploadFileDialog){t.next=7;break}return t.next=7,a.uploadPicture();case 7:if("No Error"!==a.fileUploadError){t.next=12;break}return t.next=10,a.update();case 10:t.next=13;break;case 12:a.message="File upload error. Please try again";case 13:case"end":return t.stop()}}),t)})))()},cancelUploadFileSuccess:function(){var e=this;e.isUploadFileSuccessDialog=!1},okayUploadFileSucess:function(){var e=this;e.isUploadFileSuccessDialog=!1},cancelUploadFileFailure:function(){var e=this;e.isUploadFileFailureDialog=!1},okayUploadFileFailure:function(){var e=this;e.isUploadFileFailureDialog=!1},updateData:function(){var e=this;e.isUpdateDialog=!0},cancel:function(){var e=this;e.isUpdateDialog=!1,1==e.isAdmin?(this.$router.push("/contacts"),this.$store.commit("clientStore/isAdminUpdate",!1)):this.$router.push("/user-home")},update:function(){var e=this;return l()(u.a.mark((function t(){var a,s,i,n,r,o,l;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,0==a.isAdmin&&(a.ContactDTO.contributorId=a.IdentityModel.id),""!=a.fileUrl&&void 0!=a.fileUrl&&(a.ContactDTO.base64String=a.fileUrl),s={url:"".concat(h["r"],"/updatecontactdto/").concat(a.ContactDTO.contributorId),req:a.ContactDTO},t.next=6,Object(v["c"])(s);case 6:i=t.sent,n=i.data,r=n.data,o=n.message,l=n.success,a.isUpdateDialog=!1,a.message=o,l?(a.isUpdateSuccessDialog=!0,a.saveError=!1,a.saveComplete=!1,a.savingStatus="Updated successfully",e.$store.commit("authenticationStore/AddUserPhoto",r)):(a.saveComplete=!1,a.saveError=!0,a.isUpdateFailureDialog=!0);case 11:case"end":return t.stop()}}),t)})))()},cancelUpdate:function(){var e=this;e.isUpdateDialog=!1,e.saveError=!1,e.saveComplete=!1,e.savingStatus=""},UpdateSuccessOkay:function(){var e=this;e.isUpdateSuccessDialog=!1,1==e.isAdmin&&(this.$router.push("/contacts"),this.$store.commit("clientStore/isAdminUpdate",!1))},UpdateSuccessCancel:function(){var e=this;e.isUpdateSuccessDialog=!1,1==e.isAdmin&&(this.$router.push("/contacts"),this.$store.commit("clientStore/isAdminUpdate",!1))},UpdateFailureOkay:function(){var e=this;e.isUpdateFailureDialog=!1},UpdateFailureCancel:function(){var e=this;e.isUpdateFailureDialog=!1},updateStatusBar:function(e){var t=this;t.minutes=e.minutes,t.seconds=e.seconds}},created:function(){var e=this;return l()(u.a.mark((function t(){var a,s,i,n,r,o;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,1!=a.isAdmin){t.next=5;break}a.ContactDTO=U({},a.selectedContact),t.next=14;break;case 5:return s={url:"".concat(h["r"],"/").concat(a.IdentityModel.id),req:{}},e.$store.commit("authenticationStore/setShowSpinner",!0),t.next=9,Object(v["a"])(s);case 9:i=t.sent,e.$store.commit("authenticationStore/setShowSpinner",!1),console.log("response: ",i),n=i.data,r=n.data,o=n.success,o&&(a.ContactDTO=U({},r),a.form.qFiles[0].showPreview=!0,a.form.qFiles[0].imagePreview=a.ContactDTO.base64String);case 14:case"end":return t.stop()}}),t)})))()}},D=b,S=(a("b3b6"),a("a6c2")),F=a("a3be"),C=a("ef9c"),w=a("c99e"),q=a("ec6d"),O=a("63c1"),y=a.n(O),x=Object(S["a"])(D,s,i,!1,null,null,null);t["default"]=x.exports;y()(x,"components",{QInput:F["a"],QBtn:C["a"],QSpinner:w["a"],QDialog:q["a"]})},b3b6:function(e,t,a){"use strict";var s=a("e0d0"),i=a.n(s);i.a},e0d0:function(e,t,a){}}]);